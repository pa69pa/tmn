<!DOCTYPE html>
<html>
<head>
<title>example TMN into DIV - VARY THANKS: Quick Start - Leaflet</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>

<link rel="stylesheet" href="lib/tmn.css">
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<script src="https://pa69pa.github.io/ee/lib/can.min.js"></script>
<script src="lib/tmn.min.js"></script>
</head>

<body>
<a href="index.html">Index</a> &nbsp; &nbsp;
<a href="http://leafletjs.com/examples/quick-start/">Original Page on Leaflet</a>

<div id="mapid" style="width: 100%; height: 500px;"></div>

<script>

	var mymap = L.map('mapid').setView([51.505, -0.09], 13);

 var group = L.featureGroup();//// «GROUP»
 var lines = L.featureGroup();//// «LINES»
 lines.addTo(mymap);

//////// TILES ///////
	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.streets'
	}).addTo(mymap);

/////// TO «LINES» without markers //////

 L.circle([51.516324, -0.054443], 300, {
	 color: 'violet'
	,fillColor: '#30f'
	,fillOpacity: 0.5
	,legendItem: 'circle'
 }).addTo(lines);

 L.rectangle([[51.497153, -0.101967],[51.49416, -0.082569]],{legendItem:'rectangle'}).addTo(lines);

 L.rectangle([[51.523558, -0.114789],[51.515851, -0.106258]],{legendItem:'rectangle'}).addTo(lines);

 L.polygon([[51.499183, -0.078278],[51.49897, -0.065746],[51.493412, -0.064888],[51.493305, -0.075874],[51.496618, -0.072441]],{
	 color: 'red'
	,dashArray:'20,4'
	,legendItem: 'polygon'
 }).addTo(lines).bindPopup("I am a polygon");

 L.polyline([[51.523221, -0.070553],[51.510189, -0.086346],[51.490847, -0.076218]],
	{color:'green',dashArray:[10,10],legendItem:'line'}).addTo(lines);

	L.marker([51.5, -0.09]).addTo(lines)
		.bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup();
//		.bindTooltip("<b>Hello world!</b><br />I am a tooltip.").openTooltip();


//////// TO «GROUP» with markers ////////

 var a={iconSize:[44,44],iconAnchor:[44,44]}; // bottom\right anchor for marker-point

 a.iconUrl='img/toilet.svg';
 var m = L.marker([51.5, -0.11], {
	 icon: L.icon(a)
 }).addTo(group);

	L.circle([51.5,-0.11], 500, {
		 color: 'red'
		,fillColor: '#f03'
		,fillOpacity: 0.5
		,legendItem: 'toilet'
	}).addTo(group).bindPopup("I am a circle.").setMarker(m);


/////// just popup on map //

	var popup = L.popup();

	function onMapClick(e) {
		popup
			.setLatLng(e.latlng)
			.setContent("You clicked the map at " + e.latlng.toString())
			.openOn(mymap);
	}

	mymap.on('click', onMapClick);

////// GeoJSON //////

 var myWay = ﻿{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[-0.138058,51.524891,35],[-0.138088,51.52495,35],[-0.138021,51.524963,35],[-0.137804,51.524983,35],[-0.137689,51.524987,35],[-0.137638,51.524984,35],[-0.137582,51.524982,35],[-0.137539,51.525005,34.8],[-0.13743,51.525019,34.4],[-0.137279,51.525051,34.2],[-0.136789,51.52524,33.7],[-0.13673,51.525262,33.6],[-0.136419,51.525372,33.2],[-0.136067,51.525458,32.8],[-0.135868,51.52547,32.7],[-0.135839,51.525473,32.6],[-0.135826,51.525455,32.3],[-0.135436,51.525062,31.1],[-0.135354,51.525086,30.8],[-0.135324,51.525052,30.7],[-0.134514,51.524255,31.7],[-0.132573,51.522493,38.3],[-0.13265,51.522467,38.5],[-0.132614,51.522437,38.7],[-0.13258,51.522402,38.8],[-0.131595,51.521436,39.3],[-0.131546,51.521388,39.2],[-0.130815,51.520767,37.8],[-0.130396,51.520418,36.9],[-0.130339,51.520363,36.7],[-0.130042,51.520092,36.1],[-0.12966,51.519746,35.3],[-0.129588,51.519686,35],[-0.1292,51.519318,34.3],[-0.128798,51.518948,34.2],[-0.128379,51.518557,34.5],[-0.128247,51.51844,34.5],[-0.128167,51.51837,34.5],[-0.128156,51.518332,34.6],[-0.128057,51.518241,34.7],[-0.127977,51.518203,34.9],[-0.127896,51.518123,35.1],[-0.12765,51.517841,35.7],[-0.127614,51.51779,35.9],[-0.127573,51.517739,36.1],[-0.127227,51.517317,36.4],[-0.126961,51.517002,36.4],[-0.12689,51.516918,36.4],[-0.126756,51.516935,36.5],[-0.126264,51.516989,36.1],[-0.125974,51.517033,35.7],[-0.125841,51.517053,35.6],[-0.125829,51.517054,35.4],[-0.125802,51.517038,35.2],[-0.125744,51.517021,35.1],[-0.125414,51.517074,34.8],[-0.125337,51.517086,34.7],[-0.12507,51.517101,34.6],[-0.125062,51.517065,34.4],[-0.124996,51.517057,34.4],[-0.124953,51.517059,34.4],[-0.124935,51.517023,34.4],[-0.124796,51.516788,34.4],[-0.1246,51.516441,34.7],[-0.124504,51.516331,34.9],[-0.124454,51.516272,35.1],[-0.124395,51.516226,35.2],[-0.124326,51.516175,35.3],[-0.123993,51.515941,35.6],[-0.123819,51.515821,35.7],[-0.123781,51.515793,35.8],[-0.123556,51.515609,36],[-0.123525,51.515584,36],[-0.123338,51.515456,36],[-0.123262,51.515405,35.9],[-0.123198,51.51536,35.9],[-0.122849,51.515129,35.7],[-0.122615,51.514979,35.6],[-0.12242,51.514839,35.6],[-0.122207,51.514687,35.4],[-0.122124,51.514622,35.4],[-0.122037,51.514565,35.3],[-0.121917,51.514497,35.3],[-0.121652,51.514369,35.3],[-0.120939,51.514044,35],[-0.120527,51.513893,34.8],[-0.120213,51.513765,34.6],[-0.120075,51.513712,34.5],[-0.11991,51.513644,34.3],[-0.119112,51.513336,33.6],[-0.118785,51.513197,33.3],[-0.118101,51.51294,33.2],[-0.117979,51.513003,33.2],[-0.117593,51.513131,33.5],[-0.117496,51.51316,33.7],[-0.117148,51.513263,34.2],[-0.11695,51.513274,34.4],[-0.116653,51.513292,35.1],[-0.116359,51.513297,35.8],[-0.116122,51.513292,36.2],[-0.11603,51.513281,36.5],[-0.11567,51.513222,37.2],[-0.11492,51.513103,38.4],[-0.114845,51.513099,38.6],[-0.114717,51.51311,38.8],[-0.114332,51.513194,39.1],[-0.114248,51.513213,39.2],[-0.114113,51.513238,39],[-0.113823,51.513291,38.4],[-0.113154,51.513421,36.2],[-0.11292,51.513459,35.5],[-0.112604,51.513503,34.2],[-0.112497,51.513531,33.6],[-0.112369,51.513563,33.1],[-0.111968,51.513661,31.9],[-0.111813,51.513689,31.4],[-0.111625,51.513724,30.9],[-0.111586,51.513731,30.4],[-0.111536,51.513739,29.9],[-0.1113,51.51378,29.4],[-0.111226,51.513791,28.9],[-0.111055,51.513815,28.7],[-0.110983,51.513828,28.6],[-0.110926,51.513837,28.4],[-0.11086,51.513832,28.3],[-0.110788,51.513843,28.3],[-0.110678,51.513862,28.3],[-0.110478,51.513903,28.4],[-0.110446,51.513908,28.5],[-0.110389,51.51392,28.6],[-0.110099,51.513974,28.8],[-0.109928,51.514011,28.8],[-0.109823,51.514067,28.9],[-0.109749,51.514086,28.9],[-0.10972,51.514092,29],[-0.109669,51.514099,29],[-0.109555,51.514114,29],[-0.109425,51.514128,29],[-0.109312,51.514135,29],[-0.109219,51.514139,29],[-0.109175,51.514141,29],[-0.108842,51.514162,29],[-0.108704,51.514168,29.1],[-0.10853,51.514175,29.3],[-0.108478,51.514178,29.4],[-0.108397,51.514181,29.6],[-0.108196,51.51419,29.8],[-0.107965,51.5142,30],[-0.107733,51.514205,30.2],[-0.107461,51.514201,30.5],[-0.107401,51.5142,30.9],[-0.107254,51.514198,31.2],[-0.107122,51.514196,31.6],[-0.106936,51.514193,31.9],[-0.106913,51.514193,32.3],[-0.106665,51.514189,32.8],[-0.106634,51.514189,33.3],[-0.106232,51.514185,34.3],[-0.106138,51.514184,34.8],[-0.105911,51.514181,35.3],[-0.105843,51.51418,35.8],[-0.105716,51.514201,36],[-0.10521,51.51419,36.6],[-0.105131,51.514172,36.7],[-0.105012,51.514169,36.9],[-0.104578,51.514163,36.3],[-0.104557,51.514163,36],[-0.104494,51.514161,35.6],[-0.104387,51.51416,35.3],[-0.104245,51.514154,34.9],[-0.103969,51.514151,34.3],[-0.103806,51.514149,33.7],[-0.103594,51.514148,33.1],[-0.103516,51.514148,32.6],[-0.103265,51.514111,31.8],[-0.103195,51.514068,31.1],[-0.102974,51.514033,30.4],[-0.102878,51.514042,29.9],[-0.102665,51.514005,29.3],[-0.102683,51.513969,28.8],[-0.102641,51.513959,28.2],[-0.102619,51.51395,27.7],[-0.101999,51.513864,26.2],[-0.101985,51.513859,26],[-0.101963,51.51386,25.8],[-0.101539,51.513803,25.4],[-0.10145,51.513792,25.4],[-0.101223,51.513762,25.3],[-0.101051,51.513742,25.3],[-0.101023,51.513737,25.3],[-0.100993,51.513736,25.4],[-0.100966,51.513739,25.4],[-0.100557,51.513704,25.5],[-0.100499,51.513683,25.6],[-0.100288,51.513583,25.6],[-0.100109,51.513494,25.7],[-0.099995,51.513444,25.7],[-0.099953,51.513485,25.8],[-0.099871,51.513445,25.8],[-0.099589,51.513348,25.9],[-0.099275,51.513294,26.4],[-0.099088,51.513277,26.7],[-0.098955,51.513271,27.1],[-0.098833,51.513269,27.4],[-0.098798,51.513174,27.8],[-0.098475,51.513174,28.5],[-0.098299,51.513164,28.9],[-0.098071,51.513126,29.4],[-0.097799,51.513051,30.3],[-0.097588,51.512998,30.7],[-0.097411,51.512958,30.9],[-0.097157,51.512905,31.1],[-0.097204,51.512826,31.3],[-0.096544,51.512772,31.4],[-0.096571,51.512676,31.2],[-0.096632,51.512459,30.1],[-0.096669,51.512289,29.6],[-0.096597,51.512187,29],[-0.096659,51.511952,27.8],[-0.096447,51.511959,27.2],[-0.096358,51.511906,26.5],[-0.096252,51.511914,25.8],[-0.096289,51.511462,22.6],[-0.096298,51.511358,22.1],[-0.096279,51.511336,21.7],[-0.096134,51.511331,21.4],[-0.096164,51.511069,20.9],[-0.095837,51.511035,20.6],[-0.095832,51.511099,20.6],[-0.095545,51.511088,20.5],[-0.095462,51.511086,20.5],[-0.095379,51.511083,20.5],[-0.095271,51.511071,20.5],[-0.09509,51.511055,20.5],[-0.095049,51.511051,20.5],[-0.094855,51.51103,20.6],[-0.094099,51.510942,21.1],[-0.094129,51.510823,21],[-0.094143,51.51078,20.9],[-0.094129,51.510823,18],[-0.094099,51.510942,19.7],[-0.093701,51.510891,21],[-0.09303,51.510797,21.3],[-0.093037,51.510778,21.3],[-0.093083,51.510643,21.3],[-0.093122,51.510542,21.3],[-0.093176,51.510423,21.2],[-0.093266,51.510244,21.2],[-0.093366,51.510066,20.9],[-0.093285,51.510053,20.9],[-0.093382,51.50986,20.2],[-0.093836,51.509069,13.5],[-0.094553,51.507847,3.7],[-0.094645,51.507868,3.4],[-0.09467,51.50783,3.3],[-0.094894,51.507486,4.6],[-0.094959,51.507352,5.3],[-0.095029,51.507087,6.5],[-0.09515,51.506619,9.1],[-0.095225,51.506242,10.9],[-0.095305,51.506014,11.8],[-0.095526,51.505324,12],[-0.095638,51.504916,11.3],[-0.095501,51.504904,11.2],[-0.095638,51.504916,12],[-0.096438,51.505013,11.6],[-0.096587,51.505031,11.5],[-0.097115,51.505102,11.2],[-0.097242,51.50512,11.1],[-0.097589,51.50518,10.9],[-0.097958,51.505245,10.8],[-0.098265,51.50531,10.7],[-0.098652,51.505382,10.7],[-0.098784,51.505411,10.7],[-0.099515,51.505576,10.5],[-0.099741,51.505627,10.5],[-0.100356,51.505783,10.4],[-0.100792,51.505899,10.4],[-0.101143,51.505998,10.5],[-0.102048,51.506255,11],[-0.102382,51.506361,11.2],[-0.102556,51.506419,11.4],[-0.103073,51.506591,12.3],[-0.103278,51.506667,12.6],[-0.103688,51.506818,14.3],[-0.103913,51.506928,14.9],[-0.10401,51.506974,15.6],[-0.104249,51.507088,16.6],[-0.104328,51.507121,17.1],[-0.104433,51.507131,17.5],[-0.104505,51.507136,18],[-0.104568,51.50714,18.4],[-0.104604,51.50714,18.8],[-0.105537,51.507147,20.6],[-0.105991,51.507161,21.2],[-0.106144,51.507162,21.2],[-0.106411,51.507161,21],[-0.106842,51.507154,20.3],[-0.107221,51.507104,19.7],[-0.107305,51.50709,19.4],[-0.107328,51.507087,19.2],[-0.10818,51.506924,17],[-0.108287,51.506894,16.6],[-0.108601,51.506785,15.7],[-0.108773,51.506718,15.3],[-0.108837,51.506693,14.8],[-0.108876,51.50667,14.4],[-0.108917,51.506722,13.9],[-0.10903,51.506838,13.5],[-0.109058,51.506871,13.1],[-0.109424,51.506722,12.3],[-0.109582,51.50674,12],[-0.109821,51.506763,11.7],[-0.109914,51.506862,11.4],[-0.109937,51.50692,11.2],[-0.110116,51.506907,11],[-0.110217,51.507025,10.9],[-0.110302,51.507,10.8],[-0.110606,51.506921,10.7],[-0.110686,51.507045,10.7],[-0.110745,51.507136,10.7],[-0.111535,51.506904,10.9],[-0.112129,51.50674,11.2],[-0.112413,51.506655,11.4],[-0.112621,51.506598,11.7],[-0.112676,51.506583,11.9],[-0.112765,51.506559,12.1],[-0.112958,51.506509,12.3],[-0.113514,51.506398,12.8],[-0.113894,51.50631,13],[-0.113926,51.506357,13.1],[-0.113957,51.506397,13.1],[-0.11427,51.50631,13.1],[-0.114405,51.506256,13.1],[-0.114495,51.506354,13],[-0.115174,51.507106,10.6],[-0.115296,51.507064,10.2],[-0.115209,51.506966,9.8],[-0.115257,51.506949,9.5],[-0.115345,51.507047,9.1],[-0.115412,51.507022,8.8],[-0.115718,51.507361,7.5],[-0.117232,51.509036,6],[-0.117503,51.509347,7],[-0.117617,51.509473,7.5],[-0.118143,51.510058,13.4],[-0.118028,51.510098,14.5],[-0.118019,51.510106,15.6],[-0.118022,51.510114,16.7],[-0.118099,51.510196,17.8],[-0.118449,51.510082,20.2],[-0.118489,51.510067,21.4],[-0.118399,51.509955,22.2],[-0.118375,51.509926,23],[-0.118437,51.509906,23.6]]}};

 var wayStyle = {
    "color": "#ff7800",
    "weight": 3,
    "opacity": 0.65
 };

 var geoway = L.geoJSON(myWay,{
	 style: wayStyle
	,legendItem: 'today'
 }).addTo(mymap);


///// OverLays & RunLays & tmn.init() ////

 var overlay = {
	 "my Ways": geoway
	,"my Group": group
	,"my Lines": lines
 };
 var runlay = {
	 "go to Group": group
	,"go to My Way": geoway
 };

 var divMap = tmn.init(mymap).nav(null, overlay, runlay)
	.agrLegend({ // Legend
		 "Ways":geoway
		,"Groups":group
		,"Lines":lines
	});


 /////// We can add «GROUP» to map AFTER .agrLegend() /////////
 group.addTo(mymap); // for show this layer on load page


 /////// We can add to «GROUP» AFTER .agrLegend() with same legendItem /////////
 m = L.marker([0,0],{icon:L.icon(a)}).addTo(group);//if [0,0] then setLatLng will in .setMarker(m)

 L.rectangle([[51.50026,-0.048065],[51.503778,-0.042915]], {
	 color: "#ff7800"
	,weight: 1
	,legendItem: 'toilet'
 }).setMarker(m).addTo(group);/// addTo group AFTER setMarker !!!!! [when do it after .agrLegend()]


 /////// We can add to «GROUP» AFTER .agrLegend() with new legendItem /////////
 a.iconUrl='img/cafe.svg';//console.log('A',a)
 m = L.marker([0,0],{icon:L.icon(a)}).addTo(group);//if [0,0] then setLatLng will in .setMarker(m)

 L.polygon([[51.509, -0.08],[51.503, -0.06],[51.51, -0.047]],{
	legendItem: 'cafe'
 }).bindPopup("I am a triangle.")
   .setMarker(m)
   .addTo(group);/// addTo group AFTER setMarker !!!!! [when do it after .agrLegend()]



</script>

<pre>
   ============== divMap.agrLegend( ola, arr ) ==============

* ola = along L.FeatureGroup overlay for create legend
	or array {"name":featureGroup ... }
		if into legend needed the &lt;H4&gt; name of block items
	or array [] of L.FeatureGroup's without names

* arr = options array {} for L.control, ex: {position:'bottomleft'}
	default options:
	   position:'bottomright'
	adding options:
	   classAgrLegend:'string' for addClass to div-container into L.control

</pre>

</body>
</html>
